var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");
(function(k){var e,l,m,n,o;function q(a,b){if(!XRegExp.isRegExp(a))throw TypeError("type RegExp expected");var c=a._xregexp,a=XRegExp(a.source,r(a)+(b||""));if(c)a._xregexp={source:c.source,captureNames:c.captureNames?c.captureNames.slice(0):null};return a}function r(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function x(a,b,c,f){var d=s.length,j,g,e;y=!0;try{for(;d--;)if(e=s[d],c&e.scope&&(!e.trigger||e.trigger.call(f)))if(e.pattern.lastIndex=
b,(g=e.pattern.exec(a))&&g.index===b){j={output:e.handler.call(f,g,c),match:g};break}}catch(i){throw i;}finally{y=!1}return j}function t(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(c=c||0;c<a.length;c++)if(a[c]===b)return c;return-1}XRegExp=function(a,b){var c=[],f=XRegExp.OUTSIDE_CLASS,d=0,j,g;if(XRegExp.isRegExp(a)){if(b!==k)throw TypeError("can't supply flags when constructing one RegExp from another");return q(a)}if(y)throw Error("can't call the XRegExp constructor within token definition functions");
b=b||"";for(j={hasNamedCapture:!1,captureNames:[],hasFlag:function(a){return b.indexOf(a)>-1},setFlag:function(a){b+=a}};d<a.length;)if(g=x(a,d,f,j))c.push(g.output),d+=g.match[0].length||1;else if(g=e.call(u[f],a.slice(d)))c.push(g[0]),d+=g[0].length;else{g=a.charAt(d);if(g==="[")f=XRegExp.INSIDE_CLASS;else if(g==="]")f=XRegExp.OUTSIDE_CLASS;c.push(g);d++}c=RegExp(c.join(""),l.call(b,A,""));c._xregexp={source:a,captureNames:j.hasNamedCapture?j.captureNames:null};return c};XRegExp.version="1.5.1";
XRegExp.INSIDE_CLASS=1;XRegExp.OUTSIDE_CLASS=2;var z=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,A=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,B=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,y=!1,s=[];e=RegExp.prototype.exec;m=RegExp.prototype.test;n=String.prototype.match;l=String.prototype.replace;o=String.prototype.split;var C=e.call(/()??/,"")[1]===k,w=function(){var a=/^/g;m.call(a,"");return!a.lastIndex}(),v=RegExp.prototype.sticky!==k,u={};u[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/;
u[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(a,b,c,f){s.push({pattern:q(a,"g"+(v?"y":"")),handler:b,scope:c||XRegExp.OUTSIDE_CLASS,trigger:f||null})};XRegExp.cache=function(a,b){var c=a+"/"+(b||"");return XRegExp.cache[c]||(XRegExp.cache[c]=XRegExp(a,b))};XRegExp.copyAsGlobal=function(a){return q(a,"g")};XRegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&")};XRegExp.execAt=function(a,b,c,f){var d=q(b,"g"+(f&&v?"y":""));d.lastIndex=c=c||0;a=d.exec(a);f&&a&&a.index!==c&&(a=null);if(b.global)b.lastIndex=a?d.lastIndex:0;return a};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens");}};XRegExp.isRegExp=function(a){return Object.prototype.toString.call(a)==="[object RegExp]"};XRegExp.iterate=function(a,b,c,f){for(var d=q(b,"g"),j=-1,g;g=d.exec(a);){if(b.global)b.lastIndex=d.lastIndex;c.call(f,
g,++j,a,d);d.lastIndex===g.index&&d.lastIndex++}if(b.global)b.lastIndex=0};XRegExp.matchChain=function(a,b){return function f(a,j){var g=b[j].regex?b[j]:{regex:b[j]},e=q(g.regex,"g"),i=[],p;for(p=0;p<a.length;p++)XRegExp.iterate(a[p],e,function(a){i.push(g.backref?a[g.backref]||"":a[0])});return j===b.length-1||!i.length?i:f(i,j+1)}([a],0)};RegExp.prototype.apply=function(a,b){return this.exec(b[0])};RegExp.prototype.call=function(a,b){return this.exec(b)};RegExp.prototype.exec=function(a){var b,
c,f;if(!this.global)f=this.lastIndex;if(b=e.apply(this,arguments)){!C&&b.length>1&&t(b,"")>-1&&(c=RegExp(this.source,l.call(r(this),"g","")),l.call((a+"").slice(b.index),c,function(){for(var a=1;a<arguments.length-2;a++)arguments[a]===k&&(b[a]=k)}));if(this._xregexp&&this._xregexp.captureNames)for(var d=1;d<b.length;d++)(c=this._xregexp.captureNames[d-1])&&(b[c]=b[d]);!w&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}if(!this.global)this.lastIndex=f;return b};RegExp.prototype.test=
function(a){var b;if(!this.global)b=this.lastIndex;(a=e.call(this,a))&&!w&&this.global&&!a[0].length&&this.lastIndex>a.index&&this.lastIndex--;if(!this.global)this.lastIndex=b;return!!a};String.prototype.match=function(a){XRegExp.isRegExp(a)||(a=RegExp(a));if(a.global){var b=n.apply(this,arguments);a.lastIndex=0;return b}return a.exec(this)};String.prototype.replace=function(a,b){var c=XRegExp.isRegExp(a),f,d,e;if(c){if(a._xregexp)f=a._xregexp.captureNames;if(!a.global)e=a.lastIndex}else a+="";d=
Object.prototype.toString.call(b)==="[object Function]"?l.call(this+"",a,function(){if(f){arguments[0]=new String(arguments[0]);for(var g=0;g<f.length;g++)f[g]&&(arguments[0][f[g]]=arguments[g+1])}if(c&&a.global)a.lastIndex=arguments[arguments.length-2]+arguments[0].length;return b.apply(null,arguments)}):l.call(this+"",a,function(){var a=arguments;return l.call(b+"",z,function(b,c,p){if(c)switch(c){case "$":return"$";case "&":return a[0];case "`":return a[a.length-1].slice(0,a[a.length-2]);case "'":return a[a.length-
1].slice(a[a.length-2]+a[0].length);default:p="";c=+c;if(!c)return b;for(;c>a.length-3;)p=String.prototype.slice.call(c,-1)+p,c=Math.floor(c/10);return(c?a[c]||"":"$")+p}else{c=+p;if(c<=a.length-3)return a[c];c=f?t(f,p):-1;return c>-1?a[c+1]:b}})});if(c)a.lastIndex=a.global?0:e;return d};String.prototype.split=function(a,b){if(!XRegExp.isRegExp(a))return o.apply(this,arguments);var c=this+"",f=[],d=0,e,g;if(b===k||+b<0)b=Infinity;else if(b=Math.floor(+b),!b)return[];for(a=XRegExp.copyAsGlobal(a);e=
a.exec(c);){if(a.lastIndex>d&&(f.push(c.slice(d,e.index)),e.length>1&&e.index<c.length&&Array.prototype.push.apply(f,e.slice(1)),g=e[0].length,d=a.lastIndex,f.length>=b))break;a.lastIndex===e.index&&a.lastIndex++}d===c.length?(!m.call(a,"")||g)&&f.push(""):f.push(c.slice(d));return f.length>b?f.slice(0,b):f};XRegExp.addToken(/\(\?#[^)]*\)/,function(a){return m.call(B,a.input.slice(a.index+a[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);return"("});XRegExp.addToken(/\(\?<([$\w]+)>/,
function(a){this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(a){var b=t(this.captureNames,a[1]);return b>-1?"\\"+(b+1)+(isNaN(a.input.charAt(a.index+a[0].length))?"":"(?:)"):a[0]});XRegExp.addToken(/\[\^?]/,function(a){return a[0]==="[]"?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(a){this.setFlag(a[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(a){return m.call(B,a.input.slice(a.index+a[0].length))?"":"(?:)"},
XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();if(!XRegExp)throw ReferenceError("XRegExp must be loaded before the Unicode plugin");
(function(){var k={};XRegExp.addUnicodePackage=function(e){var l=/\w{4}/g,m=/[- _]+/g,n,o;for(o in e)e.hasOwnProperty(o)&&(n=o.replace(m,"").toLowerCase(),k.hasOwnProperty(n)||(k[n]=e[o].replace(l,"\\u$&")))};XRegExp.addToken(/\\([pP]){(\^?)([^}]*)}/,function(e,l){var m=e[1]==="P"||e[2],n=e[3].replace(/[- _]+/g,"").toLowerCase();if(e[1]==="P"&&e[2])throw SyntaxError("erroneous characters: "+e[0]);if(m&&l===XRegExp.INSIDE_CLASS)throw SyntaxError("not supported in character classes: \\"+e[1]+"{"+e[2]+
"...}");if(!k.hasOwnProperty(n))throw SyntaxError("invalid or unsupported Unicode item: "+e[0]);return l===XRegExp.OUTSIDE_CLASS?"["+(m?"^":"")+k[n]+"]":k[n]},XRegExp.INSIDE_CLASS|XRegExp.OUTSIDE_CLASS);XRegExp.addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"})})();(function(k){var e,l,m,n,o,q,r,x,t;function z(a){return function(b){return Object.prototype.toString.call(b)===a}}function A(a){var b=[],c;for(c=0;c<a.snapshotLength;c++)b.push(a.snapshotItem(c));return b}function B(a,b){var c="",e="",f="";b.r===m||b.r===n||(c+="g");b.i&&(c+="i");b.w&&(e="(^|\\P{L})",f="(\\P{L}|$)");return new XRegExp(e+(b.h?"("+a+")":a)+f,c)}function y(a,b){var h="",e="",f;a.w&&(h="$1");a.h&&(h+=x,e=t);a.w&&(e+="$3");f=c(b)?b:a.w?"$2":"$1";return h+f+e}function s(a,b,h,e){var a=
B(a,h),f=y(h,e),d={matchCount:0,nodes:[]},g,j=function(a,b,c,p){g++;h.r===n||h.r===m?p.lastIndex=c.length-1:h.w&&p.lastIndex--},k,l,i,o;for(k=0;k<b.length;k++){i=b[k];for(l=g=0;l<i.childNodes.length;l++)if(o=i.childNodes[l],o.nodeType===D&&XRegExp.iterate(o.data,a,j),(h.r===n||h.r===m)&&g>0)break;if(g>0){d.nodes.push(i);d.matchCount+=g;if(c(e)||h.h)i.innerHTML=i.innerHTML.replace(a,f);if(h.r===n||h.r===m)break}}return d}function C(a){return a!==null&&(f(HTMLElement)?a instanceof HTMLElement:typeof a===
"object"&&a.nodeType===1&&c(a.nodeName))}function w(a,b){var h;if(!c(a)||!(a!==""&&C(b)))throw h=Error("Search text and HTML element must be provided"),h.name="InvalidArgumentError",h;}function v(a){var b={},c;if(a!==null&&f(a))for(c in j)b[c]=c in a?a[c]:j[c];else if(a!==null&&typeof a==="undefined")b=j;else throw a=Error("Options must be an Object"),a.name="InvalidArgumentError",a;return b}function u(b,c,h){var f;f=h.i;var b=b.replace("'","&apos;"),d=[];d.push("descendant-or-self::*");d.push("[(not(self::script or self::style or self::head");
d.push(" or self::meta or self::title or self::link");d.push(" or self::select or self::option or self::optgroup");d.push(" or self::object or self::param or self::noscript");d.push(" or self::noframes or self::map or self::area");d.push(" or self::input or self::img or self::button or self::comment))");d.push(" and text()[contains(");f?(d.push('translate(., "'),d.push(e),d.push('","'),d.push(l),d.push('")')):d.push(".");d.push(',"');f?d.push(b.toLowerCase()):d.push(b);d.push('")]]');f=d.join("");
b=null;switch(h.r){case o:b=XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE;break;case m:b=!h.i||h.w?XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:XPathResult.ANY_UNORDERED_NODE_TYPE;break;case n:b=!h.i||h.w?XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:XPathResult.FIRST_ORDERED_NODE_TYPE;break;case q:b=XPathResult.ORDERED_NODE_SNAPSHOT_TYPE;break;case r:b=XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE;break;default:throw h=Error("Invalid return type"),h.name="InvalidArgumentError",h;}c=a.evaluate(f,c,null,b,null);nodes=
null;switch(h.r){case o:case q:case r:c.snapshotLength>0&&(nodes=A(c));break;case m:case n:!h.i||h.w?c.snapshotLength>0&&(nodes=A(c)):c.singleNodeValue!==null&&(nodes=[c.singleNodeValue])}return nodes}var a=k.document,b=z("[object Function]"),c=z("[object String]"),f=z("[object Object]");x='<span class="trouveur-highlight">';t="</span>";var d=a.head||a.getElementsByTagName("head")[0];o="c";n="fn";m="an";q="aon";r="aun";var j={i:!0,w:!1,h:!0,r:r};l="abcdefghijklmnopqrstuvwxyz";e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var g=new XRegExp(x+"((?:(?!</span>).)*)"+t,"gi"),D=3;if(!b(XRegExp))throw Error("Trouveur - This library requires XRegExp to work");if(d)b=a.createElement("style"),b.innerHTML=".trouveur-highlight {background: yellow; color: black;}",d.appendChild(b);var i=function(){};i.version="0.9.1";i.count=function(a,b,c){var d=0;w(a,b);c=v(c);c.r=o;b=u(a,b,c);if(b!==null&&b.length>0)a=s(a,b,c),d=a.matchCount;return d};i.find=function(a,b,c){w(a,b);var c=v(c),d=u(a,b,c),b=[];if(d!==null&&d.length>0){if(!c.i||
c.w||c.h)a=s(a,d,c),d=a.nodes;d.length>0&&(b=d)}return b};i.replace=function(a,b,c,d){w(a,c);if(typeof b!=="string")throw a=Error("Replacement text must be provided"),a.name="InvalidArgumentError",a;var d=v(d),e=u(a,c,d),c=[];if(e!==null&&e.length>0)a=s(a,e,d,b),e=a.nodes,e.length>0&&(c=e);return c};i.highlight=function(a,b,c){c=v(c);c.h=!0;i.count(a,b,c)};i.unhighlight=function(a){var b;if(C(a))for(a=a.getElementsByClassName("trouveur-highlight");a.length>0;)b=a[0].parentNode,b.innerHTML=b.innerHTML.replace(g,
"$1");else throw a=Error("An HTML element must be provided"),a.name="InvalidArgumentError",a;};k.Trouveur=i})(window);
